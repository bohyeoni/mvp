# 📊 광고분석 쿼리 어시스턴트 시스템 제안서

## 📌 프로젝트 개요

- **프로젝트명:** 광고분석 쿼리 어시스턴트
- **작성일:** 2025년 7월 16일
- **작성자:** AIDX EDU
- **버전:** v1.0

## 🎯 목적

본 프로젝트는 지니TV 광고분석 시스템 내 다양한 데이터(광고 시청 내역, VOD 시청 내역, 채널 시청 내역 등)를 기반으로, 사용자가 자연어로 분석 요청을 입력하면 이에 맞는 쿼리 생성 또는 메타데이터 정보를 안내해주는 **지능형 쿼리 어시스턴트 시스템**을 구축하는 것을 목표로 한다.

## 🧠 배경 및 필요성

지니TV의 광고 분석 시스템은 방대한 시청 데이터와 정교한 테이블 구조를 바탕으로 운영되고 있음에도 불구하고, 사용자(마케터, 분석가 등)가 직접 SQL 쿼리를 작성하거나 테이블 구조를 파악해야 하는 불편함이 존재한다.  

따라서 본 프로젝트는 **메타데이터 기반의 자연어 쿼리 생성 및 해석 시스템**을 통해 다음과 같은 문제를 해결하고자 한다:

- SQL 사용에 익숙하지 않은 사용자도 손쉽게 데이터 활용 가능
- 테이블 및 컬럼 구조에 대한 직관적인 질의 응답 제공
- 반복적인 쿼리 작성을 자동화함으로써 업무 효율 극대화

## 🧩 시스템 주요 기능

### 📌 핵심 기능

1. **자연어 쿼리 생성**
   - 예: `"25년 6월 한달간 채널광고시청내역을 조회할 수 있는 쿼리를 만들어줘"`
   - → 시스템은 쿼리 생성에 필요한 테이블과 조건을 해석하여 SQL 제공

2. **테이블 추천 및 안내**
   - 예: `"일자별 채널별 셋탑수를 추출할 수 있는 테이블을 알려줘"`
   - → 관련 테이블명 및 컬럼 목록, 집계 기준 제공

3. **컬럼명 검색 및 설명**
   - 예: `"채널시청횟수는 컬럼명이 뭐야?"`
   - → 메타데이터 내 컬럼명을 검색하여 결과 반환

### 🗂️ 메타데이터 등록 방식

- 사용자는 다음 정보를 Azure에 등록함
  - 테이블명
  - 컬럼명
  - 컬럼 설명
  - 컬럼명 생성 규칙 (예: `채널_시청수`, `AD_VIEW_CNT`, `SETTOP_ID`, `WATCH_DATE` 등)

## 🧑‍💻 기술 스택 및 구성도

### 🛠️ 기술 스택

| 영역 | 기술 |
|------|------|
| 백엔드 | Python (FastAPI), Node.js (선택사항) |
| 프론트엔드 | React, Next.js |
| LLM 연동 | OpenAI API / Azure OpenAI |
| 데이터 저장소 | Azure SQL, Azure Blob Storage |
| 메타데이터 처리 | PostgreSQL / CosmosDB (선택) |
| 인증/보안 | Azure Active Directory, Role-based Access |

### 🏗️ 시스템 구성도

```plaintext
사용자 ─▶ 프론트엔드 ─▶ 백엔드 ─▶ LLM API
       ▼                  │
    Azure AD             ▼
                    메타데이터 DB
                          │
                    쿼리 생성 로직
                          │
                       결과 반환
````

> ※ LLM은 사용자 질문을 SQL로 변환하며, 메타데이터는 토대로서 활용됨

## ⏱️ 개발 일정 (예시)

| 단계       | 기간                       | 주요 내용                    |
| -------- | ------------------------ | ------------------------ |
| 요구사항 수집  | 2025.07.15 \~ 2025.07.31 | 사용 시나리오 정리, 테이블 샘플 확보    |
| 모델 설계    | 2025.08.01 \~ 2025.08.15 | 쿼리 템플릿 및 자연어 → SQL 매핑 설계 |
| 프로토타입 개발 | 2025.08.16 \~ 2025.09.15 | 기본 기능 개발 및 내부 테스트        |
| 고도화 및 검증 | 2025.09.16 \~ 2025.10.10 | 성능 보완 및 LLM 튜닝           |
| 배포       | 2025.10.15 이후            | 운영환경 배포 및 모니터링 구축        |

## 💡 기대 효과

* SQL 작성 부담을 줄여 분석 시간 단축
* 비기술 인력의 데이터 접근성 향상
* 반복 쿼리 자동화로 생산성 증가
* 광고 시청 데이터 기반 인사이트 도출 가속화

## 📎 참고

* 등록된 테이블 예시:

  * `ad_view_log`
  * `vod_watch_summary`
  * `channel_watch_log`

* 컬럼명 규칙 예시:

  * 날짜: `WATCH_DATE`, `AD_DATE`
  * 채널: `CHANNEL_ID`, `CHANNEL_NAME`
  * 시청횟수: `VIEW_CNT`, `WATCH_CNT`
  * 셋탑박스: `SETTOP_ID`

---

## 📝 향후 고려사항

* 사용자 맞춤 쿼리 히스토리 제공
* UI 내 SQL 시뮬레이터 제공
* 파워 BI / Looker와의 연동 지원

```
